# Theatre MVP Phase 10+ Comprehensive Specification

> **Дата создания:** 2026-01-17
> **Статус:** PLANNING
> **Версия:** 1.0

---

## Executive Summary

Расширение Theatre Management System до полнофункциональной production-ready платформы с фокусом на:
- Управление спектаклями как динамическими конструкторами
- Продвинутую аналитику и отчётность
- Современный UI/UX с лучшими практиками
- Полную интеграцию всех модулей

---

## Оглавление

1. [Phase 10: Performance Management Hub](#phase-10-performance-management-hub)
2. [Phase 11: Advanced Analytics & Reporting](#phase-11-advanced-analytics--reporting)
3. [Phase 12: UI/UX Overhaul](#phase-12-uiux-overhaul)
4. [Phase 13: Inventory & Equipment Enhancement](#phase-13-inventory--equipment-enhancement)
5. [Phase 14: Schedule & Calendar Pro](#phase-14-schedule--calendar-pro)
6. [Phase 15: System Polish & Branding](#phase-15-system-polish--branding)

---

## Phase 10: Performance Management Hub

**Цель:** Превратить страницу спектакля в полноценный центр управления.

### 10.1 Performance Constructor (Динамический конструктор)

#### Функциональность
- Drag & Drop добавление компонентов в спектакль
- Шаблоны спектаклей (балет, опера, драма, мюзикл)
- Версионирование конфигурации спектакля
- Копирование настроек между спектаклями

#### Компоненты спектакля
| Компонент | Описание | Обязательный |
|-----------|----------|--------------|
| Документы | Паспорт, технические требования | ✅ |
| Инвентарь | Реквизит, декорации, костюмы | ✅ |
| Оборудование | Свет, звук, видео, механика | ✅ |
| Персонал | Актёры, технический персонал | ✅ |
| Чеклисты | Готовность к показу | ✅ |
| Расписание | Репетиции, показы, монтаж | ✅ |
| Задачи | Подготовительные работы | ⭕ |
| Бюджет | Сметы, расходы | ⭕ |

### 10.2 Inventory Management (в контексте спектакля)

#### Требования
- Привязка инвентаря к спектаклю с указанием:
  - Количество единиц
  - Сцены использования
  - Ответственный
  - Статус готовности
- Визуальный каталог с фото
- Drag & Drop назначение
- Групповые операции (выбрать несколько → назначить)
- Поиск и фильтрация
- Категории и теги

#### UI компоненты
```
┌─────────────────────────────────────────────────────────────┐
│ Реквизит спектакля "Щелкунчик"          [+ Добавить] [⚙]   │
├─────────────────────────────────────────────────────────────┤
│ 🔍 Поиск...   [Категория ▼] [Статус ▼] [Сортировка ▼]      │
├─────────────────────────────────────────────────────────────┤
│ ☑ Выбрано: 3                    [Назначить] [Переместить]   │
├─────────────────────────────────────────────────────────────┤
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                    │
│ │ 📦  │ │ 📦  │ │ 📦  │ │ 📦  │ │ 📦  │  ← Grid View       │
│ │Трон │ │Меч  │ │Корон│ │...  │ │...  │                    │
│ │ ✓   │ │ ⏳  │ │ ✓   │ │     │ │     │                    │
│ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘                    │
└─────────────────────────────────────────────────────────────┘
```

### 10.3 Checklist System (Система чеклистов)

#### Типы чеклистов
| Тип | Описание | Автоматизация |
|-----|----------|---------------|
| Pre-show | За день до показа | Напоминания |
| Day-of | В день показа | Прогресс-бар |
| Post-show | После показа | Отчёт |
| Montage | Монтаж/демонтаж | Timeline |
| Rehearsal | Репетиция | - |

#### Функциональность
- Шаблоны чеклистов
- Назначение ответственных на пункты
- Дедлайны и напоминания
- Прогресс-бар по выполнению
- История изменений
- Комментарии к пунктам
- Фото-подтверждение выполнения

#### UI компонент
```
┌─────────────────────────────────────────────────────────────┐
│ ✅ Готовность к показу                      78% ████████░░  │
├─────────────────────────────────────────────────────────────┤
│ 📋 Свет (4/5)                                        [▼]   │
│   ☑ Проверка приборов               Иванов И.    ✓ 14:30  │
│   ☑ Настройка партитуры             Иванов И.    ✓ 15:00  │
│   ☑ Прогон с актёрами               Иванов И.    ✓ 16:00  │
│   ☑ Финальная проверка              Иванов И.    ✓ 17:30  │
│   ☐ Резервное оборудование          Петров П.    ⏰ 18:00  │
├─────────────────────────────────────────────────────────────┤
│ 📋 Звук (3/4)                                        [▼]   │
│   ...                                                       │
└─────────────────────────────────────────────────────────────┘
```

### 10.4 Cast & Crew Management (Актёры и персонал)

#### Функциональность
- Список актёров спектакля с ролями
- Дублёры и замены
- Технический персонал по цехам
- Контактная информация
- Доступность (занятость в других спектаклях)
- Гримёрные и костюмы (связь)

#### Модель данных
```
PerformanceCast
├── performance_id
├── user_id (актёр/сотрудник)
├── role_name (роль или должность)
├── role_type (main/understudy/crew)
├── department_id (для crew)
├── scenes[] (в каких сценах занят)
└── notes
```

### 10.5 Task Assignment (Назначение задач)

#### Функциональность
- Создание задач привязанных к:
  - Спектаклю
  - Инвентарю/оборудованию
  - Конкретному показу
- Назначение исполнителя
- Приоритеты и дедлайны
- Статусы (todo, in_progress, review, done)
- Комментарии и вложения
- Связанные задачи

---

## Phase 11: Advanced Analytics & Reporting

**Цель:** Предоставить глубокую аналитику и удобную отчётность.

### 11.1 Performance Analytics (Аналитика спектаклей)

#### Метрики
| Метрика | Описание | Визуализация |
|---------|----------|--------------|
| Готовность паспорта | % заполненности документов | Circular progress |
| Готовность к показу | % выполнения чеклистов | Progress bar |
| Использование ресурсов | Инвентарь, оборудование | Bar chart |
| История показов | Даты, площадки, посещаемость | Timeline |
| Затраты | Бюджет vs факт | Pie chart |

#### Dashboard виджеты
```
┌────────────────┬────────────────┬────────────────┐
│ В репертуаре   │ Ближайший      │ Готовность     │
│     12         │ показ          │ к сезону       │
│ спектаклей     │ 23 янв, 19:00  │    87%         │
│                │ "Щелкунчик"    │ ██████████░    │
└────────────────┴────────────────┴────────────────┘
┌─────────────────────────────────────────────────────┐
│ Статусы спектаклей                                  │
│ ████████ В репертуаре (12)                          │
│ ████ Подготовка (4)                                 │
│ ██ Архив (2)                                        │
└─────────────────────────────────────────────────────┘
```

### 11.2 Inventory Analytics (Аналитика инвентаря)

#### Ключевые метрики
| Метрика | Бизнес-ценность |
|---------|-----------------|
| Частота использования | Выявление востребованного оборудования |
| Простаивающее оборудование | Оптимизация закупок |
| Стоимость владения | ROI дорогого оборудования |
| Износ | Планирование замены |
| Распределение по спектаклям | Загрузка ресурсов |

#### Специализированная аналитика по типам
| Тип | Метрики |
|-----|---------|
| **Свет** | Наработка часов, расход ламп, популярные схемы |
| **Звук** | Частота использования микрофонов, износ кабелей |
| **Декорации** | Площадь хранения, транспортировка, ремонты |
| **Костюмы** | Стирки, ремонты, размерный ряд |
| **Реквизит** | Расходники, поломки, утери |

#### Отчёты
1. **Отчёт о загрузке оборудования**
   - Период: месяц/квартал/год
   - Группировка: по типу, по цеху, по спектаклю
   - Формат: PDF, XLSX

2. **Отчёт о простаивающем оборудовании**
   - Оборудование стоимостью > X руб.
   - Не использовалось > Y дней
   - Рекомендации

3. **Отчёт об износе**
   - Приближающееся к замене
   - Требующее ремонта
   - План закупок

### 11.3 Report Generator (Генератор отчётов)

#### Функциональность
- Визуальный конструктор отчётов
- Предустановленные шаблоны
- Экспорт в PDF, DOCX, XLSX
- Печать с preview
- Расписание автоматической генерации
- Отправка на email

#### Шаблоны отчётов
| Шаблон | Содержание |
|--------|------------|
| Паспорт спектакля | Полная техническая документация |
| Райдер | Требования для гастролей |
| Монтировочная опись | Список декораций с параметрами |
| Чеклист готовности | Статус подготовки к показу |
| Аналитика сезона | Статистика за период |

---

## Phase 12: UI/UX Overhaul

**Цель:** Создать интуитивный, красивый и отзывчивый интерфейс.

### 12.1 Typography System (Типографика)

#### Шрифты
| Использование | Шрифт | Размеры |
|---------------|-------|---------|
| Заголовки H1-H3 | Cormorant Garamond | 32/28/24px |
| Заголовки H4-H6 | Inter Semibold | 20/18/16px |
| Основной текст | Inter Regular | 14/16px |
| Подписи | Inter Regular | 12px |
| Моноширинный | JetBrains Mono | 13px |

#### Читаемость
- Line-height: 1.5 для текста, 1.2 для заголовков
- Letter-spacing: -0.02em для заголовков
- Max-width: 65ch для текстовых блоков
- Контраст: WCAG AA минимум (4.5:1)

### 12.2 Component Library Enhancement

#### Новые компоненты
| Компонент | Описание |
|-----------|----------|
| `MultiSelect` | Выбор нескольких элементов с тегами |
| `DragDropList` | Перетаскивание элементов |
| `ImageGallery` | Галерея с lightbox |
| `ProgressRing` | Круговой прогресс |
| `StepWizard` | Пошаговый мастер |
| `Combobox` | Поиск + выпадающий список |
| `DateRangePicker` | Выбор периода |
| `Tooltip` | Всплывающие подсказки |
| `ContextMenu` | Контекстное меню |
| `Kanban` | Доска задач |

#### Улучшения существующих
| Компонент | Улучшения |
|-----------|-----------|
| `Table` | Виртуализация, resize колонок, sticky header |
| `Select` | Поиск, группировка, иконки |
| `Modal` | Анимации, размеры, вложенные модалки |
| `Card` | Варианты, hover эффекты |
| `Button` | Состояния loading, variants |

### 12.3 Interactions & Animations

#### Принципы
- Длительность: 150-300ms для UI, 300-500ms для модалок
- Easing: cubic-bezier(0.4, 0, 0.2, 1)
- Никаких резких появлений/исчезновений
- Skeleton loading для всего контента

#### Анимации
| Элемент | Анимация |
|---------|----------|
| Модальные окна | Fade + scale from center |
| Dropdown | Fade + slide down |
| Sidebar | Slide from left |
| Toast | Slide from right |
| Progress | Smooth transition |
| Hover states | 150ms color/shadow |

### 12.4 Layout & Composition

#### Grid система
```
┌──────────────────────────────────────────────────────────┐
│ Header (64px fixed)                                      │
├────────┬─────────────────────────────────────────────────┤
│        │                                                 │
│ Sidebar│              Main Content                       │
│ (256px │              (flex-1)                           │
│ collap-│                                                 │
│ sible) │              ┌─────────────────────────────┐    │
│        │              │ Content area max-w-7xl      │    │
│        │              │ mx-auto px-6               │    │
│        │              └─────────────────────────────┘    │
│        │                                                 │
└────────┴─────────────────────────────────────────────────┘
```

#### Responsive breakpoints
| Breakpoint | Width | Layout |
|------------|-------|--------|
| Mobile | < 640px | Single column, bottom nav |
| Tablet | 640-1024px | Collapsed sidebar |
| Desktop | 1024-1440px | Full layout |
| Wide | > 1440px | Centered content |

### 12.5 Search, Filter & Sort

#### Глобальный поиск
- Cmd/Ctrl + K открывает command palette
- Поиск по всем сущностям
- Recent searches
- Quick actions

#### Фильтры
- Chips для активных фильтров
- Preset фильтры (сохранённые)
- Clear all одной кнопкой
- Count показывает результаты

#### Сортировка
- Multi-column sort
- Сохранение preference
- Visual indicator направления

---

## Phase 13: Inventory & Equipment Enhancement

**Цель:** Улучшить работу с инвентарём и оборудованием.

### 13.1 Visual Catalog (Визуальный каталог)

#### Режимы отображения
| Режим | Описание |
|-------|----------|
| Grid | Карточки с фото 3-6 колонок |
| List | Компактный список |
| Table | Детальная таблица |
| Gallery | Только фото (masonry) |

#### Карточка инвентаря
```
┌─────────────────────────┐
│ ┌─────────────────────┐ │
│ │                     │ │
│ │      📷 Photo       │ │
│ │                     │ │
│ └─────────────────────┘ │
│ Кресло "Король"         │
│ INV-2024-0342           │
│ ────────────────────────│
│ 📍 Склад А, стеллаж 12  │
│ 🎭 Щелкунчик, Спящая... │
│ ────────────────────────│
│ ● В наличии             │
│ [Подробнее] [Назначить] │
└─────────────────────────┘
```

### 13.2 Image Management (Управление изображениями)

#### Функциональность
- Multiple photos per item
- Main photo selection
- Drag & drop upload
- Crop & rotate
- Zoom preview (lightbox)
- Bulk upload

### 13.3 Bulk Operations (Групповые операции)

#### Действия
- Выбрать все / снять выбор
- Назначить категорию
- Добавить теги
- Переместить на локацию
- Назначить на спектакль
- Экспорт списка
- Печать QR-кодов

### 13.4 Categories & Tags (Категории и теги)

#### Иерархия категорий
```
Инвентарь
├── Декорации
│   ├── Жёсткие
│   ├── Мягкие
│   └── Проекции
├── Реквизит
│   ├── Игровой
│   └── Бутафория
├── Костюмы
│   ├── Основные
│   ├── Массовка
│   └── Аксессуары
├── Оборудование
│   ├── Световое
│   ├── Звуковое
│   ├── Видео
│   └── Механика
└── Мебель
    ├── Сценическая
    └── Офисная
```

#### Теги
- Создание произвольных тегов
- Цветовое кодирование
- Автодополнение при вводе
- Фильтрация по тегам

---

## Phase 14: Schedule & Calendar Pro

**Цель:** Расширить возможности календаря и расписания.

### 14.1 Event Management (Управление событиями)

#### Типы событий
| Тип | Цвет | Описание |
|-----|------|----------|
| Показ | Золотой | Публичные показы |
| Репетиция | Синий | Репетиции |
| Монтаж | Зелёный | Установка декораций |
| Демонтаж | Красный | Разбор после показа |
| Техническая | Серый | Обслуживание |
| Гастроли | Фиолетовый | Выездные |

#### Создание события
- Quick create (click on slot)
- Detailed form (modal)
- Recurring events
- Conflict detection
- Resource booking

### 14.2 Resource Calendar (Календарь ресурсов)

#### Виды
- По площадкам (venues)
- По спектаклям
- По персоналу
- По оборудованию

#### Конфликты
- Visual overlap warning
- Suggestions for resolution
- Auto-check при создании

### 14.3 Drag & Drop Scheduling

- Перетаскивание событий
- Resize для изменения длительности
- Multi-day events
- Snap to grid (15/30/60 min)

---

## Phase 15: System Polish & Branding

**Цель:** Финальная полировка и брендинг.

### 15.1 Branding Assets

#### Логотипы
| Вариант | Использование |
|---------|---------------|
| Full logo | Header, login page |
| Icon (32px) | Favicon, mobile |
| Icon (64px) | PWA, desktop |
| Monochrome | Print, dark bg |

#### Цветовая палитра
```
Primary:   #D4A574 (Gold)
Secondary: #1A2332 (Dark Blue)
Accent:    #3B82F6 (Blue)
Success:   #10B981 (Green)
Warning:   #F59E0B (Amber)
Error:     #EF4444 (Red)
```

### 15.2 Login & Auth Pages

#### Login page
- Большой логотип
- Фоновое изображение театра (blur)
- Анимированные элементы
- Remember me
- Password recovery
- Error states

### 15.3 Dashboard Enhancement

#### Виджеты
| Виджет | Описание |
|--------|----------|
| Welcome | Приветствие + quick stats |
| Upcoming | Ближайшие события |
| Tasks | Мои задачи |
| Recent | Последние действия |
| Analytics | Ключевые метрики |
| Alerts | Уведомления |

### 15.4 SVG Icon System

#### Кастомные иконки
- Театральная маска
- Софит
- Микрофон
- Декорация
- Костюм
- Реквизит
- Партитура
- Занавес

#### Стиль
- 24x24 base size
- 1.5px stroke
- Rounded caps
- Consistent style with Heroicons

### 15.5 Help & Onboarding

#### Tooltips
- Информативные подсказки
- First-time user hints
- Keyboard shortcuts
- Feature discovery

#### Help system
- Contextual help
- Video tutorials
- Searchable docs
- Contact support

---

## Технические требования

### Performance
| Метрика | Требование |
|---------|------------|
| First Contentful Paint | < 1.5s |
| Time to Interactive | < 3s |
| Largest Contentful Paint | < 2.5s |
| API response (lists) | < 500ms |
| API response (detail) | < 200ms |

### Browser Support
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### Accessibility
- WCAG 2.1 AA compliance
- Keyboard navigation
- Screen reader support
- Focus indicators
- Color contrast

---

## Оценка трудозатрат

| Phase | Название | Backend | Frontend | Total |
|-------|----------|---------|----------|-------|
| 10 | Performance Management Hub | 40h | 60h | 100h |
| 11 | Analytics & Reporting | 30h | 40h | 70h |
| 12 | UI/UX Overhaul | 10h | 80h | 90h |
| 13 | Inventory Enhancement | 20h | 40h | 60h |
| 14 | Schedule Pro | 20h | 30h | 50h |
| 15 | Polish & Branding | 10h | 40h | 50h |
| **Σ** | **ИТОГО** | **130h** | **290h** | **420h** |

---

## Приоритизация

### Must Have (P0)
- Performance inventory management
- Checklist system
- Basic analytics dashboard
- Search & filter improvements

### Should Have (P1)
- Cast & crew management
- Report generator
- Drag & drop interactions
- Image gallery improvements

### Nice to Have (P2)
- Advanced analytics
- Custom report builder
- Full UI animation system
- Comprehensive help system

---

## Зависимости между фазами

```
Phase 10 ─────┬─────► Phase 11 (Analytics needs data)
              │
              └─────► Phase 13 (Inventory in performance)

Phase 12 ─────────────► All phases (UI components used everywhere)

Phase 14 ◄──────────── Phase 10 (Calendar uses performance data)

Phase 15 ◄──────────── All phases (Final polish)
```

---

## Следующие шаги

1. ✅ Создать спецификацию (этот документ)
2. ⏳ Создать BrainGrid requirements для каждой фазы
3. ⏳ Декомпозировать на задачи
4. ⏳ Обновить memory-bank документацию
5. ⏳ Создать ветки Git для каждой фазы
6. ⏳ Начать реализацию с Phase 10
